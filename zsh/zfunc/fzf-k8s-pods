fzf-k8s-pods::print() {
    if ! which kubectl 1>/dev/null 2>&1; then
        echo 'A "kubectl" command is not found.'
        return 1
    fi
    local s=$(kubectl get po | tail -n +2 | fzf)
    [[ -n $s ]] && (echo $s | awk '{print $1}')
}

[[ "x$BUFFER" != "x" ]] && BUFFER="$BUFFER"
BUFFER="$BUFFER$(fzf-k8s-pods::print)"
CURSOR=$#BUFFER
zle redisplay
